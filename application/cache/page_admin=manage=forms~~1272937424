cadebb7109d2551ffc0fe3f5f28988445b6b4b20<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=7" />
	<title>Gulf Oil Spill Tracker</title>
	<link rel="stylesheet" type="text/css" href="http://oilspill.skytruth.org/media/css/admin/all.css" />
<link rel="stylesheet" type="text/css" href="http://oilspill.skytruth.org/media/css/jquery-ui-themeroller.css" />
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="http://oilspill.skytruth.org/media/css/ie6.css" />
<![endif]--><script type="text/javascript" src="http://oilspill.skytruth.org/media/js/jquery.js"></script>
<script type="text/javascript" src="http://oilspill.skytruth.org/media/js/jquery.form.js"></script>
<script type="text/javascript" src="http://oilspill.skytruth.org/media/js/jquery.validate.min.js"></script>
<script type="text/javascript" src="http://oilspill.skytruth.org/media/js/jquery.ui.min.js"></script>
<script type="text/javascript" src="http://oilspill.skytruth.org/media/js/selectToUISlider.jQuery.js"></script>
<script type="text/javascript" src="http://oilspill.skytruth.org/media/js/jquery.hovertip-1.0.js"></script>
<link rel="stylesheet" type="text/css" href="http://oilspill.skytruth.org/media/css/jquery.hovertip-1.0.css" />
<script type="text/javascript">
		$(function() {
			if($('.tooltip[title]') != null)
			$('.tooltip[title]').hovertip();
		});
	</script>	<script type="text/javascript" charset="utf-8">
		/**
 * Forms js file.
 *
 * Handles javascript stuff related to forms function.
 *
 * PHP version 5
 * LICENSE: This source file is subject to LGPL license 
 * that is available through the world-wide-web at the following URI:
 * http://www.gnu.org/copyleft/lesser.html
 * @author     Ushahidi Team <team@ushahidi.com> 
 * @package    Ushahidi - http://source.ushahididev.com
 * @module     API Controller
 * @copyright  Ushahidi - http://www.ushahidi.com
 * @license    http://www.gnu.org/copyleft/lesser.html GNU Lesser General Public License (LGPL) 
 */


$(document).ready(function() {
	form_id = '';
	if (form_id) {
		showForm('formDiv_' + form_id);
		$('#tr_' + form_id).effect("highlight", {}, 3000);
	};
});

function fillFields(id, form_title, form_description,
 form_visible )
{
	$("#form_id").attr("value", unescape(id));
	$("#form_title").attr("value", unescape(form_title));
	$("#form_description").attr("value", unescape(form_description));
	$("#form_active").attr("value", unescape(form_active));
	
}

// Form Submission
function formAction ( action, confirmAction, id )
{
	var statusMessage;
	var answer = confirm('Are You Sure You Want To ' 
		+ confirmAction + ' items?');
	if (answer){
		// Set Submit Type
		$("#action_" + id).attr("value", action);		
		// Submit Form
		$("#form_action_" + id).submit();			
	
	} else{
		return false;
	}
}

// Show Function
function showForm(id)
{
	if (id) {
		$('#' + id).toggle(400);
	}
}

// Toggle Add New Field
function addNewForm(id)
{
	if (id) {
		showForm('formadd_' + id);
		showFormSelected('1',id,'',false);
	}
}

// Ajax Call to Display 'Add New Field Form'
function showFormSelected(id, form_id, field_id, select_disable)
{
	if (id) {
		$('#form_result_' + form_id).html('');
		$('#form_result_' + form_id).hide();
		$('#form_fields_' + form_id).hide(300);
		$('#form_field_' + form_id +' [name=field_type]').val(id);
		$.post("http://oilspill.skytruth.org/admin/manage/forms/selector", { selector_id: id, form_id: form_id, field_id: field_id },
			function(data){
				if (data.status == 'success'){
					$('#form_fields_' + form_id).html('');
					$('#form_fields_' + form_id).show(300);
					$('#form_fields_' + form_id).html(data.message);
					$('#form_field_' + form_id +' [name=field_name]').focus();
				}
		  	}, "json");
	};	
}

// Modify Individual Form Fields
function fieldAction( action, confirmAction, field_id, form_id, field_type )
{
	$('#form_fields_current_' + form_id).css({
	"background-image" : "url('http://oilspill.skytruth.org/media/img/loading_g2.gif')",
	"background-position" : "center center",
	"background-repeat" : "no-repeat"
	});
	
	switch(action)
	{
	case 'e':
		$('#formadd_' + form_id).show(400);
		showFormSelected(field_type, form_id, field_id, true);
		$('#form_fields_current_' + form_id).css({
		"background-image" : "none"
		});
		break;
	case 'd':
		var answer = confirm('Are You Sure You Want To ' 
			+ confirmAction + ' Field?');
		if (answer){
			$.post("http://oilspill.skytruth.org/admin/manage/forms/field_delete", { form_id: form_id, field_id: field_id },
				function(data){
					if (data.status == 'success'){
						$('#form_fields_current_' + form_id).html('');
						$('#form_fields_current_' + form_id).html(unescape(data.response));
						//$('#form_fields_current_' + form_id).effect("highlight", {}, 2000);
						$('#form_fields_current_' + form_id).css({
						"background-image" : "none"
						});
					}
			  	}, "json");
		}
		break;
	case 'mu':
		$.post("http://oilspill.skytruth.org/admin/manage/forms/field_move", { form_id: form_id, field_id: field_id, field_position: 'u' },
			function(data){
				if (data.status == 'success'){
					$('#form_fields_current_' + form_id).html('');
					$('#form_fields_current_' + form_id).html(unescape(data.response));
					//$('#form_fields_current_' + form_id).effect("highlight", {}, 2000);
					$('#form_fields_current_' + form_id).css({
					"background-image" : "none"
					});
				}
		  	}, "json");
		break;
	case 'md':
		$.post("http://oilspill.skytruth.org/admin/manage/forms/field_move", { form_id: form_id, field_id: field_id, field_position: 'd' },
			function(data){
				if (data.status == 'success'){
					$('#form_fields_current_' + form_id).html('');
					$('#form_fields_current_' + form_id).html(unescape(data.response));
					//$('#form_fields_current_' + form_id).effect("highlight", {}, 2000);
					$('#form_fields_current_' + form_id).css({
					"background-image" : "none"
					});
				}
		  	}, "json");
		break;
	}
}

		function info_search(){
			$("#info-search").submit();
		}
	</script>
</head>
<body>
	<div class="holder">
		<!-- header -->
		<div id="header">
			<!-- top-area -->
			<div class="top">
				<strong>Moderator</strong>
				<ul>
					<li class="none-separator"> Welcome, Administrator!</li>
					<li class="none-separator"><a href="http://oilspill.skytruth.org/" title="View the home page">
						View Site</a>					
					<li class="none-separator"><a href="http://oilspill.skytruth.org/admin/profile/">My Profile</a></li>
					<li><a href="log_out">Logout</a></li>
				</ul>
                        </div>
                        
			<!-- info-nav -->
			<div class="info-nav">
				<h3>Get Help</h3>
				<ul>
					<li ><a href="http://wiki.ushahididev.com/">Wiki</a></li>
					<li><a href="http://wiki.ushahididev.com/doku.php?id=how_to_use_ushahidi_alpha">FAQ's</a></li>
					<li><a href="http://forums.ushahidi.com/">Forum</a></li>
				</ul>
				<div class="info-search"><form action="http://oilspill.skytruth.org/admin/reports" id="info-search"><input type="text" name="k" class="info-keyword" value=""> <a href="javascript:info_search();" class="btn">Search</a></form></div>
				<div style="clear:both"></div>
			</div>
			<!-- title -->
			<h1>Gulf Oil Spill Tracker</h1>
			<!-- nav-holder -->
			<div class="nav-holder">
				<!-- main-nav -->
				<ul class="main-nav">
					<li><a href="http://oilspill.skytruth.org/admin/dashboard" >
						Dashboard						</a></li>
					<li><a href="http://oilspill.skytruth.org/admin/reports" >
						Reports						</a></li>
					<li><a href="http://oilspill.skytruth.org/admin/comments" >
						Comments						</a></li>
					<li><a href="http://oilspill.skytruth.org/admin/messages" >
						Messages						</a></li>
					<li><a href="http://oilspill.skytruth.org/admin/feedback" >
						Feedback						</a></li>
					<li><a href="http://oilspill.skytruth.org/admin/stats" >
						Stats						</a></li>
				</ul>
				<!-- sub-nav -->
				<ul class="sub-nav">
											<li><a href="http://oilspill.skytruth.org/admin/settings/site">Settings</a></li>
						<li><a href="http://oilspill.skytruth.org/admin/manage">Manage</a></li>
						<li><a href="http://oilspill.skytruth.org/admin/users">Users</a></li>
									</ul>
			</div>
		</div>
		<!-- content -->
		<div id="content">
			<div class="bg">
					
		<div class="bg">
			<h2>
				<a href="http://oilspill.skytruth.org/admin/manage">Categories</a>
				<a href="http://oilspill.skytruth.org/admin/manage/forms" class="active">Forms</a>
				<span>(<a href="#add">Add New</a>)</span>
				<a href="http://oilspill.skytruth.org/admin/manage/organizations">Organizations</a>
				<a href="http://oilspill.skytruth.org/admin/manage/pages">Pages</a>
				<a href="http://oilspill.skytruth.org/admin/manage/feeds">News Feeds</a>
				<a href="http://oilspill.skytruth.org/admin/manage/layers">Layers</a>
				<a href="http://oilspill.skytruth.org/admin/manage/reporters">Reporters</a>
			</h2>
							<!-- green-box -->
				<div class="green-box">
					<h3>The Form Has Been CREATED/EDITED!</h3>
				</div>
						<!-- report-table -->
			<div class="report-form">				
				<div class="table-holder">
					<table class="table">
						<thead>
							<tr>
								<th class="col-1">&nbsp;</th>
								<th class="col-2">Form</th>
								<th class="col-3">&nbsp;</th>
								<th class="col-4">Actions</th>
							</tr>
						</thead>
						<tfoot>
							<tr class="foot">
								<td colspan="4">
									
<ul class="pager">

	<li class="first">1 pages</li>

	

	
		
		
		
		
		
		
		
		
		
		
					<li><a href="#" class="active">1</a></li>
		
	
		
		
		
		
		
		
		
		
		

	
</ul>								</td>
							</tr>
						</tfoot>
						<tbody>
															<form action="http://oilspill.skytruth.org/admin/manage/forms" method="post" id="form_action_1" name="form_action_1">
									<input type="hidden" name="action" id="action_1" value="">
									<input type="hidden" name="form_id" value="1">
									<tr id="tr_1">
										<td class="col-1">&nbsp;</td>
										<td class="col-2">
											<div class="post">
												<h4>Default Form&nbsp;&nbsp;&nbsp;[<a href="javascript:showForm('formDiv_1')">Edit Form Fields</a></li>]</h4>
												<p>Default form, for report entry</p>
											</div>
										</td>
										<td>&nbsp;</td>
										<td class="col-4">
											<ul>
												<li class="none-separator"><a href="#add" onClick="fillFields('1','Default%20Form','Default%20form%2C%20for%20report%20entry')">Edit</a></li>
												<li class="none-separator"><a href="javascript:formAction('a','SHOW/HIDE','1')" class="status_yes">Active</a></li>
												<li><a href="javascript:formAction('d','DELETE','1')" class="del">Delete</a></li>
											</ul>
										</td>
									</tr>
								</form>
								<tr style="margin:0;padding:0;border-width:0;">
									<td colspan="4" style="margin:0;padding:0;border-width:0;">
										<div id="formDiv_1" class="forms_fields">
											<a href="javascript:addNewForm('1')" class="new-form_field">Add New Field</a>
											<div id="formadd_1" class="forms_fields_add">
												<div class="tab">
													<div>
														<form action="http://oilspill.skytruth.org/admin/manage/forms/field_add" method="post" id="form_field_1" name="form_field_1">
															<strong>Select A Field Type:</strong>
															<select id="field_type" name="field_type"  onchange="showFormSelected(this.options[this.selectedIndex].value, '1', '', '')">
<option value="" selected="selected">--- Select A Field Type ---</option>
<option value="1">Text Field</option>
<option value="2">Text Area Field (Free Text)</option>
</select>															<div id="form_fields_1" class="forms_fields_new"></div>
														</form>
													</div>		
												</div>
											</div>
											<div id="form_fields_current_1" class="forms_fields_current">
												<form><div class="forms_fields_item">	<strong>Phone Nunber:</strong><br /><input type="text" id="custom_1" name="custom_1" value=""  />	<div class="forms_fields_edit">
									<a href="javascript:fieldAction('e','EDIT',1,1,1);">EDIT</a>&nbsp;|&nbsp;
									<a href="javascript:fieldAction('d','DELETE',1,1,1);">DELETE</a>&nbsp;|&nbsp;
									<a href="javascript:fieldAction('mu','MOVE',1,1,1);">MOVE UP</a>&nbsp;|&nbsp;
									<a href="javascript:fieldAction('md','MOVE',1,1,1);">MOVE DOWN</a></div></div></form>											</div>
										</div>
									</td>
								</tr>
																<form action="http://oilspill.skytruth.org/admin/manage/forms" method="post" id="form_action_2" name="form_action_2">
									<input type="hidden" name="action" id="action_2" value="">
									<input type="hidden" name="form_id" value="2">
									<tr id="tr_2">
										<td class="col-1">&nbsp;</td>
										<td class="col-2">
											<div class="post">
												<h4>Test Form&nbsp;&nbsp;&nbsp;[<a href="javascript:showForm('formDiv_2')">Edit Form Fields</a></li>]</h4>
												<p>This is a test</p>
											</div>
										</td>
										<td>&nbsp;</td>
										<td class="col-4">
											<ul>
												<li class="none-separator"><a href="#add" onClick="fillFields('2','Test%20Form','This%20is%20a%20test')">Edit</a></li>
												<li class="none-separator"><a href="javascript:formAction('a','SHOW/HIDE','2')" class="status_yes">Active</a></li>
												<li><a href="javascript:formAction('d','DELETE','2')" class="del">Delete</a></li>
											</ul>
										</td>
									</tr>
								</form>
								<tr style="margin:0;padding:0;border-width:0;">
									<td colspan="4" style="margin:0;padding:0;border-width:0;">
										<div id="formDiv_2" class="forms_fields">
											<a href="javascript:addNewForm('2')" class="new-form_field">Add New Field</a>
											<div id="formadd_2" class="forms_fields_add">
												<div class="tab">
													<div>
														<form action="http://oilspill.skytruth.org/admin/manage/forms/field_add" method="post" id="form_field_2" name="form_field_2">
															<strong>Select A Field Type:</strong>
															<select id="field_type" name="field_type"  onchange="showFormSelected(this.options[this.selectedIndex].value, '2', '', '')">
<option value="" selected="selected">--- Select A Field Type ---</option>
<option value="1">Text Field</option>
<option value="2">Text Area Field (Free Text)</option>
</select>															<div id="form_fields_2" class="forms_fields_new"></div>
														</form>
													</div>		
												</div>
											</div>
											<div id="form_fields_current_2" class="forms_fields_current">
												<form></form>											</div>
										</div>
									</td>
								</tr>
														</tbody>
					</table>
				</div>
			</div>
	
			<!-- tabs -->
			<div class="tabs">
				<!-- tabset -->
				<a name="add"></a>
				<ul class="tabset">
					<li><a href="#" class="active">Create/Edit Form</a></li>
				</ul>
				<!-- tab -->
				<div class="tab">
					<form action="http://oilspill.skytruth.org/admin/manage/forms" method="post" id="formMain" name="formMain">
					<input type="hidden" id="form_id" 
						name="form_id" value="" />
					<input type="hidden" id="form_active" 
						name="form_active" vaule="" />
					<input type="hidden" name="action" 
						id="action" value=""/>
					<div class="tab_form_item">
						<strong>Form Title:</strong><br />
						<input type="text" id="form_title" name="form_title" value=""  class="text" />					</div>
					<div class="tab_form_item">
						<strong>Form Description:</strong><br />
						<input type="text" id="form_description" name="form_description" value=""  class="text long" />					</div>						
					<div class="tab_form_item">
						&nbsp;<br />
						<input type="image" src="http://oilspill.skytruth.org/media/img/admin/btn-save.gif" class="save-rep-btn" />
					</div>
					</form>
			
				</div>
			</div>
		</div>
			</div>
		</div>
	</div>
	<div id="footer">
		<div class="holder">
			<strong>
				<a href="http://www.ushahidi.com" target="_blank" title="Ushahidi Engine" alt="Ushahidi Engine">
                	<sup>1.0.1</sup>
            	</a>
			</strong>
		</div>
	</div>
</body>
</html>
